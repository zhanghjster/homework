### UTF8
#### 概述

UTF8是一种能够兼容ASCII的一种折中的ASCII编码格式，能够包含任何UNICODE字符，但文件长度会有一定的增加。UTF是Unicode Transformation Format, '8'表示用一至四个8bit的字节块来表示字符。

#### 详述

对于任何不大于127(0x7F)的字符，UTF8用一个byte表示，其中低7位表示值，最高为为0， 这与ASCII编码的值时相同的。

对于值为128--2047之间的字符，UTF8为两个byte。第一个byte为110XXXXX，第二个byte为10XXXXXX，共有11位(0x7FF)用来表示字符的值.

对于2018--65535之间的字符，UTF8位三个byte。三个byte格式分别为1110XXXX,10XXXXX和10XXXXXX, 共有16位（0xFFFF)来表示字符的值.

对于任何大于65536的字符，UTF8用四个byte表示。四个byte格式分别为11110XXX,10XXXXXX,10XXXXXX,10XXXXXX. 共有21位（0x1FFFFF), 但Unicode的字符并没有0x1FFFFF个，最大值为0x10FFFF

下面是字符对照表

1st Byte|2nd Byte|3rd Byte|4th Byte | Number of free Bits | Max unicode value
--------|--------|--------|---------|---------------------|-------------------
0xxxxxxx|        |        |         |       7             | 127
110xxxxx|10xxxxxx|        |         |     5+6 = 11        | 2047(0x7F)
1110xxxx|10xxxxxx|10xxxxxx|         |     4+6*2 = 16      | 65535(0xFFFF)
11110xxx|10xxxxxx|10xxxxxx|10xxxxxx |     3+6*3 = 21      | 1,114,111(0x10FFFF)

### Unicode

#### 简介

在很久很久以前，计算机还处于中古时期的时候，人们用不多于127个数字就能表示所有用到的符号，用一个byte的7个bit就能全部表示了。其中 1-31 表示不可打印的字符，用于控制，比如7表示beep。32-127为可打印。随着时间的推移，人们需要表示更多的符号，比如中文、日文、法文，但缺少统一的标准来规定哪个数字对应哪个符号。这样Unicode应运而生，将全世界的所有符号用统一的数字表示。这些数字用16-bit表示，所以最多能有65535个符号。

在unicode里，一个字符映射到一个理论上的概念Code Point，他只是一个用来表示字符的16bit数字，并不代表他在内存里如何存储。

举个栗子, Hello 用code point 表示为:

```
U+0048 U+0065 U+006C U+006C U+006F.

```
#### 编码

在最早，人们直接用code point的值的方式进行编码，那么Hello的编码格式为

```
00 48 00 65 00 6C 00 6C 00 6F
```

还可以

```
48 00 65 00 6C 00 6C 00 6F 00
```

分别对应大端和小端。这种编码格式名为UCS-2.人们为了区分大端那么为了区分这两种格式，在字符串的开始加上FE FF或FF FE来区分。

但是，随着时间推移，65539个字符已经不够用了，UTF-16就出现了，他用一个或两个16-bit来表示。

这种办法用了一段时间后，人们开始觉得不方便，一是很多的00没有意义，空增加了字符的长度，二是那些ASCII编码的字符还得进行转码才能兼容。

这样牛牛的UTF8蛋生了。它是另外一种保存code point的方式，能够兼容ASCII的编码格式。




 